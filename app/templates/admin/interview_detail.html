{% extends "admin/layout.html" %}

{% block content %}
<div class="flex justify-between mb-4">
    <h1>面接詳細: {{ interview.candidate.name }}様</h1>
    <a href="/admin/interviews_ui" class="btn btn-sm">戻る</a>
</div>

<div class="card">
    <div class="grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <div>
            <span class="text-muted">予約日時:</span> {{ interview.reservation_time.strftime('%Y-%m-%d %H:%M') }}
        </div>
        <div>
            <span class="text-muted">ステータス:</span>
            <span class="badge badge-{{ interview.status }}">{{ interview.status }}</span>
        </div>
        <div>
            <span class="text-muted">電話番号:</span> {{ interview.candidate.phone }}
        </div>
        <div>
            <span class="text-muted">ID:</span> {{ interview.id }}
        </div>
    </div>
</div>

<h2>回答一覧</h2>
{% for review in reviews %}
<div class="card">
    <div class="mb-4">
        <strong>Q{{ loop.index }}. {{ review.question_text }}</strong>
    </div>

    <div class="mb-4">
        <p class="text-muted" style="font-size: 0.9rem;">回答音声:</p>
        {% if review.recording_url %}
        <audio controls src="{{ review.recording_url }}" style="width: 100%; margin-top: 0.5rem;"></audio>
        {% else %}
        <span class="text-muted">（録音データなし）</span>
        {% endif %}
    </div>

    <div>
        <p class="text-muted" style="font-size: 0.9rem;">文字起こし:</p>
        <div style="background: rgba(0,0,0,0.2); padding: 1rem; border-radius: 0.5rem; margin-top: 0.5rem;">
            {{ review.transcript or '（文字起こし中、またはデータなし）' }}
        </div>
    </div>
</div>
{% endfor %}

{% if not reviews %}
<div class="card text-muted">
    まだ回答データがありません。
</div>
{% endif %}

{% endblock %}